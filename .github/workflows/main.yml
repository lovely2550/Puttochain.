# ... (โค้ดส่วนอื่น ๆ ของ main.yml) ...

jobs:
  build-and-test:
    runs-on: ubuntu-latest
    steps:
    # ... (Setup Python เหมือนเดิม) ...
        
    - name: Install dependencies (FIXED)
      run: |
        # ติดตั้งแพ็กเกจหลักทั้งหมด
        pip install fastapi uvicorn[standard] pydantic web3 python-dotenv sqlalchemy psycopg2-binary
        
        # *** ตรวจสอบให้แน่ใจว่าได้ติดตั้งโปรเจกต์ในโหมดแก้ไข (-e .) เพื่อให้ Python รู้จักโมดูล puttochain ***
        pip install -e .
        
        # ติดตั้งเครื่องมือทดสอบ/วิเคราะห์
        pip install pytest pytest-cov flake8

    # ... (ขั้นตอน Lint และ Test ที่เหลือ) ...
